User daemon
Group daemon

ServerRoot "/tmp/httpd-fuzz-root"
Listen 8080

# Minimal deterministic fuzz configuration
ServerAdmin fuzz@example.com
ServerName localhost
HostnameLookups Off
PidFile /tmp/httpd-fuzz.pid
Mutex posixsem

<IfModule mpm_prefork_module>
    StartServers 1
    MinSpareServers 1
    MaxSpareServers 1
    MaxRequestWorkers 1
    ServerLimit 1
    MaxConnectionsPerChild 0
</IfModule>

Timeout 5
KeepAlive Off

ErrorLog "/dev/stderr"
CustomLog "/dev/null" common
LogLevel emerg

<Directory />
    AllowOverride none
    Require all denied
</Directory>

DocumentRoot "/tmp/httpd-fuzz-root/htdocs"
<Directory "/tmp/httpd-fuzz-root/htdocs">
    Options None
    AllowOverride None
    Require all granted
</Directory>

<Files ".ht*">
    Require all denied
</Files>

# Avoid modules that can introduce nondeterminism or external dependencies
EnableMMAP Off
EnableSendfile Off
ProxyRequests Off

# Restrict optional modules used by default configs
# (many modules are statically linked, but unused directives stay dormant)
<IfModule status_module>
    ExtendedStatus Off
</IfModule>

<IfModule ssl_module>
    SSLRandomSeed startup builtin
    SSLRandomSeed connect builtin
</IfModule>
